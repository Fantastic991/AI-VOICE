<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI Speaking Practice</title>
<style>
body {
font-family: Arial, sans-serif;
text-align: center;
background-color: #f8f9fa;
padding: 40px;
}
h1 {
color: #333;
}
#targetSentence {
font-size: 1.5em;
margin: 20px 0;
}
select, button {
font-size: 1em;
padding: 10px;
margin: 10px;
}
#result {
margin-top: 20px;
font-size: 1.3em;
font-weight: bold;
color: #007bff;
}
</style>
</head>
<body>
<h1>üé§ AI Speaking Practice</h1>

<label for="sentenceSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ:</label>
<select id="sentenceSelect">
<option>My favorite country is South Korea.</option>
<option>I like to travel every summer.</option>
<option>Learning English is fun and useful.</option>
<option>How are you today?</option>
</select>

<div id="targetSentence">My favorite country is South Korea.</div>

<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á AI -->
<button id="playButton">üîà ‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>

<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
<div>
<button id="recordButton">üéôÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏π‡∏î</button>
</div>

<p id="status"></p>
<p id="result"></p>

<!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°/‡∏´‡∏¢‡∏∏‡∏î -->
<audio id="startBeep" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
<audio id="stopBeep" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
const recordButton = document.getElementById("recordButton");
const status = document.getElementById("status");
const result = document.getElementById("result");
const startBeep = document.getElementById("startBeep");
const stopBeep = document.getElementById("stopBeep");
const sentenceSelect = document.getElementById("sentenceSelect");
const targetSentence = document.getElementById("targetSentence");

// ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
sentenceSelect.addEventListener("change", () => {
targetSentence.textContent = sentenceSelect.value;
result.textContent = "";
});

// üéß ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°/‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î
let mediaRecorder;
let chunks = [];

recordButton.addEventListener("click", async () => {
if (mediaRecorder && mediaRecorder.state === "recording") {
stopBeep.play();
mediaRecorder.stop();
recordButton.textContent = "üéôÔ∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏π‡∏î";
status.textContent = "‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...";
} else {
startBeep.play();
const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
mediaRecorder = new MediaRecorder(stream);
chunks = [];

mediaRecorder.ondataavailable = (e) => chunks.push(e.data);
mediaRecorder.onstop = () => {
const audioBlob = new Blob(chunks, { type: "audio/wav" });
analyzePronunciation(audioBlob);
};

mediaRecorder.start();
recordButton.textContent = "‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏π‡∏î";
status.textContent = "üé§ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á...";
}
});

// üß† ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ (‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏ò‡∏¥‡∏ï)
function analyzePronunciation(audioBlob) {
status.textContent = "";
const randomScore = Math.floor(Math.random() * 30) + 70;
result.textContent = `‚≠ê ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ${randomScore}/100`;
}

// üîä ‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏™‡∏≥‡πÄ‡∏ô‡∏µ‡∏¢‡∏á‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏±‡∏ô)
const playButton = document.getElementById("playButton");
playButton.addEventListener("click", () => {
const sentence = targetSentence.textContent.trim();
const url = `https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&q=${encodeURIComponent(sentence)}&tl=en`;
const audio = new Audio(url);
audio.play();
});
</script>
</body>
</html>
